(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{191:function(e,t,n){},335:function(e,t,n){"use strict";n.r(t);var c,r=n(0),s=n(10),i=n.n(s),a=n(34),o=n(13),d=n(29),l=d.c,u=n(363),j=n(365),b=n(366),h=function(e,t){return e.length>t?e.slice(0,t)+"...":e},m=n(2),O=Object(u.a)({post:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:15,border:"2px solid rgba(0,0,0, .4)",borderRadius:12,marginBottom:15},btn:{marginRight:15}}),x=function(e){var t=e.id,n=e.index,c=e.title,r=e.body,s=O(),i=Object(o.f)();return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:s.post,children:[Object(m.jsxs)(j.a,{container:!0,children:[Object(m.jsx)(j.a,{container:!0,item:!0,xs:6,alignItems:"center",children:Object(m.jsxs)("p",{children:["#: ",n]})}),Object(m.jsxs)(j.a,{container:!0,item:!0,xs:6,alignItems:"center",justifyContent:"flex-end",children:[Object(m.jsx)(b.a,{onClick:function(){return function(e){i.push("/post/edit/".concat(e))}(t)},variant:"contained",color:"primary",className:s.btn,children:"edit"}),Object(m.jsx)(b.a,{onClick:function(){return function(e){i.push("/post/".concat(e))}(t)},variant:"contained",children:"view"})]})]}),Object(m.jsxs)("p",{children:["ID in the Database: ",t]}),Object(m.jsxs)("p",{children:["Title: ",h(c,50)]}),Object(m.jsxs)("p",{children:["Description: ",h(r,125)]})]})})},p=(n(191),function(){return Object(m.jsx)(j.a,{container:!0,item:!0,justifyContent:"center",children:Object(m.jsx)("div",{className:"loadingio-spinner-spin-11c6t503gmv",children:Object(m.jsxs)("div",{className:"ldio-06z2k1d0zc9",children:[Object(m.jsx)("div",{children:Object(m.jsx)("div",{})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{})})]})})})}),f=function(){var e=l((function(e){return e.posts})),t=e.posts,n=e.loading;return e.error?Object(m.jsx)("div",{children:"Something going wrong, please try later :("}):n?Object(m.jsx)(p,{}):Object(m.jsx)(m.Fragment,{children:t.map((function(e,t){var n=e.id,c=e.title,r=e.body;return Object(m.jsx)(x,{index:t+1,id:n,title:c,body:r},n)}))})},v=n(26),g=n.n(v),S=n(48),y=n(160),C=n.n(y).a.create({baseURL:"https://bloggy-api.herokuapp.com/",responseType:"json"}),E=function(){var e=Object(S.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.get("posts/".concat(t,"?_embed=comments")).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(S.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.get("posts").then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(S.a)(g.a.mark((function e(t,n){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={postId:t,body:n},e.next=3,C.post("/comments",c).then((function(e){return e.data}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(S.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.post("/posts",t).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(S.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.put("/posts/".concat(t),n).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(S.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.delete("/posts/".concat(t)).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=n(20);!function(e){e.FETCH_POSTS="FETCH_POSTS",e.FETCH_POSTS_SUCCESS="FETCH_POSTS_SUCCESS",e.FETCH_POSTS_ERROR="FETCH_POSTS_ERROR",e.RESET_FIRST_FETCH="RESET_FIRST_FETCH"}(c||(c={}));var _={posts:[],loading:!0,error:!1,isFirstFetch:!0},R=function(){return{type:c.RESET_FIRST_FETCH}},D=function(){var e=l((function(e){return e.posts})).isFirstFetch,t=Object(d.b)();return Object(r.useEffect)((function(){e&&(t({type:c.FETCH_POSTS}),T().then((function(e){return t((n=e,{type:c.FETCH_POSTS_SUCCESS,payload:n}));var n})).catch((function(e){console.error(e),t({type:c.FETCH_POSTS_ERROR})})))}),[]),Object(m.jsx)(f,{})},H=n.p+"static/media/error-404-design.18f495d7.png",B=n(372),I=n(161),A=n.n(I),M=n(368),V=A()({errorBlock:{height:"100vh"},block:{marginTop:15}}),U=function(){var e=V(),t=Object(o.f)();return Object(m.jsxs)(j.a,{container:!0,justifyContent:"center",alignItems:"center",direction:"column",className:e.errorBlock,children:[Object(m.jsx)(j.a,{item:!0,children:Object(m.jsx)("img",{src:H,alt:"404"})}),Object(m.jsx)(j.a,{item:!0,children:Object(m.jsx)(B.a,{severity:"error",children:"Sorry, this page not found :("})}),Object(m.jsxs)(j.a,{item:!0,className:e.block,children:["Go"," ",Object(m.jsx)(M.a,{color:"primary",href:"#",underline:"always",onClick:function(){return t.push("/")},children:"Home"}),"?"]})]})},q=n(11),z=n(96),Y=n(62),G=n(371);function J(e){var t=Object(Y.c)(e),n=Object(q.a)(t,2),c=n[0],r=n[1],s=r.error,i=r.touched;return Object(m.jsx)(G.a,Object(N.a)(Object(N.a)({error:!!s,touched:i.toString()},c),e))}function W(e){var t=Object(Y.c)(e),n=Object(q.a)(t,2),c=n[0],r=n[1],s=r.error,i=r.touched;return Object(m.jsx)(G.a,Object(N.a)(Object(N.a)({},c),{},{error:!!s,touched:i.toString()},e))}var L=Object(u.a)({mb10:{marginBottom:10},mb25:{marginBottom:25},mb50:{marginBottom:50},mt20:{marginTop:20},w90:{width:"90%"}}),K=function(e){var t=e.handlerForm,n=e.textBtnSubmit,c=e.initialValueTitle,r=e.initialValueBody,s=e.checkDiffVal,i=L(),a=z.a().shape({title:z.b().required("required filed").test("len","Must be max 99 characters",(function(e){return!(!e||e.toString().length>=99)})),body:z.b().required("required filed").test("len","Must be max 255 characters",(function(e){return!(!e||e.toString().length>=555)}))});return Object(m.jsx)(Y.b,{validationSchema:a,initialValues:{title:c||"",body:r||""},onSubmit:t,validateOnMount:!0,enableReinitialize:!0,children:function(e){var t=e.errors,a=e.touched,o=e.values,d=Object.keys(t).length,l=function(e){return Object.keys(t).includes(e)},u=t.title&&a.title||l("title"),h=t.body&&a.body||l("body");return Object(m.jsx)(Y.a,{children:Object(m.jsxs)(j.a,{container:!0,direction:"column",alignItems:"center",children:[Object(m.jsxs)(j.a,{className:"".concat(i.mb25," ").concat(i.w90),container:!0,item:!0,xs:6,direction:"column",alignItems:"center",children:[u?Object(m.jsx)(B.a,{className:"".concat(i.mb10," ").concat(i.w90),severity:"error",children:t.title}):null,Object(m.jsx)(J,{className:i.w90,id:"title",name:"title",variant:"outlined",label:"Title*",placeholder:"Your title..."})]}),Object(m.jsxs)(j.a,{className:i.mb25,container:!0,item:!0,xs:6,direction:"column",alignItems:"center",children:[h?Object(m.jsx)(B.a,{className:"".concat(i.mb10," ").concat(i.w90),severity:"error",children:t.body}):null,Object(m.jsx)(W,{className:i.w90,id:"body",name:"body",label:"Description*",multiline:!0,variant:"outlined",placeholder:"Your Description...",minRows:15})]}),Object(m.jsx)(j.a,{container:!0,item:!0,xs:6,justifyContent:"center",children:s?Object(m.jsx)(b.a,{variant:"contained",color:"primary",type:"submit",disabled:o.title===c&&o.body===r||0!==d,children:n}):Object(m.jsx)(b.a,{variant:"contained",color:"primary",type:"submit",disabled:0!==d,children:n})})]})})}})},Q=n(369),X=function(){var e=Object(d.b)(),t=L(),n=Object(r.useState)(!1),c=Object(q.a)(n,2),s=c[0],i=c[1],a=Object(r.useState)(!1),o=Object(q.a)(a,2),l=o[0],u=o[1];return Object(m.jsxs)("div",{children:[s&&Object(m.jsxs)(B.a,{severity:"success",className:t.mb10,children:[Object(m.jsx)(Q.a,{children:"Success"}),"Post success added \u2014 ",Object(m.jsx)("strong",{children:"Please check it out :)"})]}),l&&Object(m.jsxs)(B.a,{severity:"error",className:t.mb10,children:[Object(m.jsx)(Q.a,{children:"Error"}),"Something going wrong \u2014 ",Object(m.jsx)("strong",{children:"Please try later :("})]}),Object(m.jsx)(K,{handlerForm:function(t,n){w(t).then((function(){n.setSubmitting(!1),n.resetForm({values:{title:"",body:""}}),n.validateForm().then(),i(!0),setTimeout((function(){return i(!1)}),5e3),e(R())})).catch((function(e){u(!0),console.error(e),setTimeout((function(){return u(!1)}),5e3)}))},textBtnSubmit:"Add post"})]})},Z=n(373),$=Object(u.a)((function(){return{paper:{position:"absolute",width:400,backgroundColor:"#ffffff",border:"2px solid red",borderRadius:12,boxShadow:"0 0 15px rgba(0,0,0, .4)",padding:15,top:"50%",transform:"translate(-50%, -50%)",left:"50%"}}})),ee=function(e){var t=e.showSuccessEditPost,n=e.showErrorEditPost,c=e.handlerAddPost,r=e.dataPost,s=e.setOpenModalDelPost,i=e.openModalDelPost,a=e.deletePost,o=L(),d=$();return Object(m.jsxs)("div",{children:[t&&Object(m.jsxs)(B.a,{severity:"success",className:o.mb10,children:[Object(m.jsx)(Q.a,{children:"Success"}),"Post success edited \u2014"," ",Object(m.jsx)("strong",{children:"Please check it out :)"})]}),n&&Object(m.jsxs)(B.a,{severity:"error",className:o.mb10,children:[Object(m.jsx)(Q.a,{children:"Error"}),"Something going wrong \u2014 ",Object(m.jsx)("strong",{children:"Please try later :("})]}),Object(m.jsx)(K,{handlerForm:c,textBtnSubmit:"Edit post",initialValueTitle:r.title,initialValueBody:r.body,checkDiffVal:!0}),Object(m.jsx)(j.a,{container:!0,item:!0,xs:12,justifyContent:"center",className:o.mt20,children:Object(m.jsx)(b.a,{onClick:function(){return s(!0)},variant:"contained",color:"secondary",children:"Delete"})}),Object(m.jsx)(Z.a,{open:i,onClose:function(){return s(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(m.jsxs)("div",{className:d.paper,children:[Object(m.jsx)(j.a,{container:!0,item:!0,justifyContent:"center",className:o.mb25,children:"Are you Sure ?"}),Object(m.jsxs)(j.a,{container:!0,justifyContent:"space-evenly",children:[Object(m.jsx)(j.a,{container:!0,item:!0,justifyContent:"center",xs:6,children:Object(m.jsx)(b.a,{variant:"contained",onClick:function(){return s(!1)},children:"Cancel"})}),Object(m.jsx)(j.a,{container:!0,item:!0,justifyContent:"center",xs:6,children:Object(m.jsx)(b.a,{onClick:a,variant:"contained",color:"secondary",children:"Delete"})})]})]})})]})},te=Object(r.createContext)({}),ne=function(e){var t=e.children,n=L(),c=Object(r.useState)(!1),s=Object(q.a)(c,2),i=s[0],a=s[1];return Object(m.jsxs)(m.Fragment,{children:[i&&Object(m.jsxs)(B.a,{severity:"success",className:n.mb10,children:[Object(m.jsx)(Q.a,{children:"Success"}),"Post success deleted \u2014"," ",Object(m.jsx)("strong",{children:"Please check it out :)"})]}),Object(m.jsx)(te.Provider,{value:{setShowSuccessDelPost:a},children:t})]})},ce=function(){var e=Object(r.useContext)(te).setShowSuccessDelPost,t=Object(o.h)().id,n=Object(o.f)(),c=Object(d.b)(),s=Object(r.useState)(!0),i=Object(q.a)(s,2),a=i[0],l=i[1],u=Object(r.useState)({id:0,title:"",body:"",comments:[]}),j=Object(q.a)(u,2),b=j[0],h=j[1],O=Object(r.useState)(!1),x=Object(q.a)(O,2),f=x[0],v=x[1],g=Object(r.useState)(!1),S=Object(q.a)(g,2),y=S[0],C=S[1],T=Object(r.useState)(!1),P=Object(q.a)(T,2),w=P[0],_=P[1];Object(r.useEffect)((function(){l(!0),E(t).then((function(e){l(!1),h(e)})).catch((function(e){l(!1),console.error(e),n.push("/home")}))}),[t]);return a?Object(m.jsx)(p,{}):Object(m.jsx)(ee,{showErrorEditPost:y,showSuccessEditPost:f,dataPost:b,handlerAddPost:function(e,n){F(Number(t),e).then((function(){n.setSubmitting(!1),n.resetForm(),h((function(t){return Object(N.a)(Object(N.a)({},t),{},{title:e.title,body:e.body})})),v(!0),setTimeout((function(){return v(!1)}),5e3),c(R())})).catch((function(e){C(!0),console.error(e),setTimeout((function(){return C(!1)}),5e3)}))},deletePost:function(){k(Number(t)).then((function(){c(R()),e(!0),setTimeout((function(){return e(!1)}),5e3),n.push("/home")})).catch((function(e){console.error(e),_(!1),C(!0),setTimeout((function(){return C(!1)}),5e3)}))},openModalDelPost:w,setOpenModalDelPost:_})},re=Object(u.a)({comment:{padding:15,border:"2px solid rgba(0,0,0, .4)",borderRadius:12,marginBottom:15}}),se=function(e){var t=e.body,n=e.index,c=re();return Object(m.jsxs)("div",{className:c.comment,children:[Object(m.jsxs)("p",{children:["#: ",n]}),Object(m.jsx)("p",{children:t})]})},ie=Object(u.a)({field:{width:"100%",marginBottom:15},btn:{margin:"0 auto"}}),ae=function(e){var t=e.dataPost,n=e.handleCommentField,c=e.comment,r=e.handleAddCommentBtn,s=e.showSuccessAddComment,i=e.showErrorAddComment,a=ie(),o=L(),d=t.id,l=t.title,u=t.body,h=t.comments;return Object(m.jsxs)(m.Fragment,{children:[s&&Object(m.jsxs)(B.a,{severity:"success",children:[Object(m.jsx)(Q.a,{children:"Success"}),"Comment success added \u2014"," ",Object(m.jsx)("strong",{children:"Please check it out :)"})]}),i&&Object(m.jsxs)(B.a,{severity:"error",children:[Object(m.jsx)(Q.a,{children:"Error"}),"Something going wrong \u2014 ",Object(m.jsx)("strong",{children:"Please try later :("})]}),Object(m.jsxs)("p",{children:["ID in the Database: ",d]}),Object(m.jsxs)("p",{children:["Title: ",l]}),Object(m.jsxs)("p",{className:o.mb50,children:["Description: ",u]}),Object(m.jsx)(G.a,{className:a.field,id:"add-comment",label:"Your Comment...",multiline:!0,rows:4,variant:"outlined",value:c,onChange:function(e){return n(e)}}),Object(m.jsx)(j.a,{container:!0,item:!0,xs:12,justifyContent:"center",children:Object(m.jsx)(b.a,{className:o.mb50,variant:"contained",color:"primary",onClick:function(){return r()},children:"Add Comment"})}),h.map((function(e,t){var n=e.id,c=e.body;return Object(m.jsx)(se,{body:c,index:t+1},n)}))]})},oe=[{path:"/",Component:D,isExact:!0},{path:"/home",Component:D,isExact:!0},{path:"/post/edit/:id",Component:ce,isExact:!0},{path:"/post/add",Component:X,isExact:!0},{path:"/post/:id",Component:function(){var e=Object(o.f)(),t=Object(o.h)().id,n=Object(r.useState)(!0),c=Object(q.a)(n,2),s=c[0],i=c[1],a=Object(r.useState)({id:0,title:"",body:"",comments:[]}),d=Object(q.a)(a,2),l=d[0],u=d[1],j=Object(r.useState)(""),b=Object(q.a)(j,2),h=b[0],O=b[1],x=Object(r.useState)(!1),f=Object(q.a)(x,2),v=f[0],g=f[1],S=Object(r.useState)(!1),y=Object(q.a)(S,2),C=y[0],T=y[1];return Object(r.useEffect)((function(){i(!0),E(t).then((function(e){i(!1),console.log(e),u(e)})).catch((function(t){i(!1),console.error(t),e.push("/home")}))}),[t]),s?Object(m.jsx)(p,{}):Object(m.jsx)(ae,{dataPost:l,handleCommentField:function(e){O(e.target.value)},comment:h,handleAddCommentBtn:function(){h.length>0&&(P(Number(t),h).then((function(){g(!0),E(t).then((function(e){u(Object(N.a)(Object(N.a)({},l),{},{comments:e.comments}))})).catch((function(e){T(!0),console.error(e),setTimeout((function(){return T(!1)}),5e3)})),setTimeout((function(){return g(!1)}),5e3)})).catch((function(e){g(!0),console.error(e),setTimeout((function(){return T(!1)}),5e3)})),O(""))},showSuccessAddComment:v,showErrorAddComment:C})},isExact:!0},{path:"*",Component:U,isExact:!0}],de=n(167),le=n.n(de),ue=Object(u.a)({header:{marginBottom:20},link:{display:"flex",alignItems:"center"},addPost:{display:"flex",justifyContent:"flex-end"}}),je=function(){var e=Object(o.g)(),t=ue(),n="/home"===e.pathname||"/"===e.pathname,c="/post/add"===e.pathname;return Object(m.jsxs)(j.a,{container:!0,className:t.header,children:[n?null:Object(m.jsx)(j.a,{container:!0,item:!0,xs:6,children:Object(m.jsxs)(a.b,{to:"/home",className:t.link,children:[Object(m.jsx)(le.a,{}),"Go Home"]})}),c?null:Object(m.jsx)(j.a,{container:!0,item:!0,xs:6,className:n?"":t.addPost,children:Object(m.jsx)(a.b,{to:"/post/add",className:t.link,children:"Add Post"})})]})},be=n(370),he=function(){return Object(m.jsx)(be.a,{maxWidth:"md",children:Object(m.jsxs)(a.a,{children:[Object(m.jsx)(je,{}),Object(m.jsx)("div",{children:Object(m.jsx)(ne,{children:Object(m.jsx)(o.c,{children:oe.map((function(e){var t=e.path,n=e.Component,c=e.isExact;return Object(m.jsx)(o.a,{path:t,exact:c,component:n},t)}))})})})]})})},me=n(69),Oe=Object(me.combineReducers)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.FETCH_POSTS:return Object(N.a)(Object(N.a)({},e),{},{loading:!0,error:!1,posts:[]});case c.FETCH_POSTS_SUCCESS:return{loading:!1,error:!1,posts:t.payload,isFirstFetch:!1};case c.FETCH_POSTS_ERROR:return Object(N.a)(Object(N.a)({},e),{},{loading:!1,error:!0,posts:[]});case c.RESET_FIRST_FETCH:return Object(N.a)(Object(N.a)({},e),{},{isFirstFetch:!0});default:return e}}}),xe=n(168),pe=Object(me.createStore)(Oe,Object(xe.composeWithDevTools)());i.a.render(Object(m.jsx)(d.a,{store:pe,children:Object(m.jsx)(he,{})}),document.getElementById("root"))}},[[335,1,2]]]);
//# sourceMappingURL=main.c700accf.chunk.js.map